#!/bin/bash

# ======================================
# å›½é™…åŒ–æ£€æŸ¥è„šæœ¬
# ä½¿ç”¨: ./scripts/check-i18n.sh
# ======================================

echo "ğŸ” æ‰«æç¡¬ç¼–ç ä¸­æ–‡æ–‡æœ¬..."
echo ""
echo "ä»¥ä¸‹æ˜¯å¯èƒ½éœ€è¦å›½é™…åŒ–çš„ç¡¬ç¼–ç æ–‡æœ¬ï¼š"
echo "================================================"
echo ""

cd "$(dirname "$0")/../src"

# æœç´¢ JSX ä¸­ç›´æ¥æ˜¾ç¤ºçš„ä¸­æ–‡ï¼ˆ>ä¸­æ–‡<ï¼‰å’Œå­—ç¬¦ä¸²ä¸­çš„ä¸­æ–‡
grep -rn --include="*.tsx" -E '>[^<{]*[ä¸€-é¾¥]+|"[^"]*[ä¸€-é¾¥][^"]*"' app components 2>/dev/null \
  | grep -v "locales/" \
  | grep -v "t\." \
  | grep -v "// " \
  | grep -v "console" \
  | grep -v "alt=" \
  | grep -v "æ­£åœ¨åˆå§‹åŒ–\|Redirecting" \
  | sort -t: -k1,1 -k2,2n

echo ""
echo "================================================"
echo ""
echo "ğŸ’¡ ä¿®å¤æ–¹æ³•ï¼š"
echo "   1. åœ¨ src/locales/zh.ts æ·»åŠ ä¸­æ–‡ç¿»è¯‘ key"
echo "   2. åœ¨ src/locales/en.ts æ·»åŠ è‹±æ–‡ç¿»è¯‘"
echo "   3. åœ¨ src/locales/ko.ts æ·»åŠ éŸ©æ–‡ç¿»è¯‘"
echo "   4. æ›¿æ¢ç¡¬ç¼–ç æ–‡æœ¬ä¸º {t.xxx.yyy}"
echo ""
echo "ç¤ºä¾‹ï¼š"
echo '   âŒ <h1>ä¸“ä¸šæ£šæ‹æ¨¡å¼</h1>'
echo '   âœ… <h1>{t.proStudio?.proStudioMode}</h1>'
echo ""
